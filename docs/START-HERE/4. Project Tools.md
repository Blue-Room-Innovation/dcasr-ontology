All executions are performed starting from the `package.json`.

## Validations

### OWL Ontology Validation

> Verify that your OWL ontologies are syntactically and semantically correct.

```bash
npm run validate:owl
```

> [!NOTE] What it does
>
> - Validates compliance with the OWL 2 DL profile
> - Runs the HermiT reasoner
> - **Generates** merged and inferred ontologies
> - Reports errors and warnings

#### Alternatives

##### Quiet Mode

```bash
npm run validate:owl:quiet
```

Suppresses detailed output and only shows errors.

##### Include codelists

```bash
npm run validate:owl:with-codelists
```

Validates ontologies together with all codelists.

---

### SHACL Validation

> Validate RDF data against SHACL constraint shapes using **configurable scenarios (defined in [[3. Configuration#9.2 SHACL (`validation.shacl`)||config.yml]])**

> [!NOTE] What it does
>
> - Validates RDF data against SHACL _shapes_ (constraints and rules)
> - Executes validation according to the configured scenario (e.g. dataset, shapes, options)
> - Generates a validation report with **violations**, **warnings**, and per-rule details
> - Returns the execution result (success if there are no violations; failure if there are, depending on configuration)

```bash
npm run validate:shacl
```

#### Alternatives

##### Validate a specific scenario

```bash
npm run validate:shacl <scenario-name>
```

##### List scenarios

```bash
npm run validate:shacl:list
```

---

## Generation

### TypeScript Generation

> Auto-generate TypeScript types starting from JSON Schemas (**previously generated from SHACL shapes**).

> [!NOTE] What it does
>
> - Orchestrates a **2-step pipeline**:
>   1. **SHACL (.ttl) → JSON Schema (.schema.json)**
>   2. **JSON Schema → TypeScript (.ts)**
> - Determines which shapes/projects to generate by reading `config.yml` (see `generation.artifacts[]`, paths, and `*_version` versions)
> - Writes the artifacts to `build/<build_version>/`

```bash
npm run generate:types
```

#### Alternatives

##### Verbose (debug) mode

```bash
npm run generate:types:verbose
```

#### Outputs

For each configured artifact, the following are generated:

- `build/<build_version>/<name>.schema.json`
- `build/<build_version>/<name>.ts`

#### Important notes

- Although the command is described as “generation from SHACL”, **direct TypeScript generation consumes the JSON Schema** (step 2). SHACL is the **original source** (step 1).
- If step 1 (SHACL → JSON Schema) fails, step 2 (JSON Schema → TS) is **not** executed.

---

### 4. Wiki Documentation Generation

> Automatically generate human-readable documentation from ontologies.

```bash
npm run generate:wiki
```

> [!NOTE] What it generates
>
> - `build/<build_version>/wiki/index.md`: Summary table
> - `build/<build_version>/wiki/<ontology>/README.md`: Class and property documentation
> - `build/<build_version>/wiki/<ontology>/SHAPES.md`: SHACL constraint documentation
> - `build/<build_version>/wiki/<ontology>/diagram.svg`: Visual class diagrams (Mermaid)
>
> Configuration based on [[3. Configuration#11) Wiki (`wiki`)|config.yml]]

---

## Build index generation

> Generate GitHub Pages-friendly `index.md` files to browse versioned outputs.

```bash
npm run generate:build-index
```

This command writes/updates:

- `build/index.md`
- `build/<version>/index.md` (for each `build/vX.Y` folder)

If `repository.pages_url` is set in `config.yml`, the indexes contain absolute links to the GitHub Pages domain.

#### Alternatives

##### Include codelists

```bash
npm run generate:wiki:with-codelists
```

##### Verbose mode

```bash
npm run generate:wiki:verbose
```

---

## Conversion

### 5. SHACL to JSON Schema

> Convert SHACL _shapes_ into a JSON Schema file.

```bash
npm run generate:json-schema
```

> [!NOTE] What it generates
>
> - A **JSON Schema** file (e.g. `build/v0.1/custom-output.schema.json`) equivalent to the constraints defined in the input SHACL _shapes_.
>
> Configuration based on [[3. Configuration#8) Generation (`generation`)|config.yml]]

---

### 6. JSON-LD Context

> Automatically generate a JSON-LD context from SHACL shapes (useful for compacting JSON-LD and/or using “local-name” keys while preserving RDF semantics).

```bash
npm run convert:context
```

> [!NOTE] What it generates
> A JSON-LD Context file (e.g. `recycling.generated.jsonld`) with term mappings (local-name → IRI/CURIE) derived from the input SHACL.
>
> Configuration based on [[3. Configuration#8) Generation (`generation`)|config.yml]]

---

### 7. JSON Schema to TypeScript

> Generate TypeScript types from a JSON Schema for use in applications and TypeScript validators.

```bash
npm run convert:ts
```

> [!NOTE] What it generates
>
> - A **TypeScript** file (e.g. `build/v0.1/custom-output.ts`) with types derived from the input JSON Schema
>
> Configuration based on [[3. Configuration#8) Generation (`generation`)|config.yml]]

---

## Release

Calculate/apply the next version change:

```bash
npm run release:version
```

Run the full release workflow:

```bash
npm run release:all
```

---

## Config

Show the effective configuration used by the wrapper (paths, flags, variables, etc.)

```bash
npm run config:show
```

---

## Docker

### Build the Docker image/environment used by the wrapper

```bash
npm run docker:build
```

### Open a shell inside the Docker environment used by the project

```bash
npm run docker:shell
```

---

## Contracts

### Build the `ontology-contracts` workspace

> (runs its `npm run build`), it is a separate Node.js project, meant to be imported directly.

```bash
npm run contracts:build
```

### Run the tests of the `consumer-node-ts` example

> (runs its `npm run test`), it is a separate Node.js project and serves as a test of `ontology-contracts` to perform runtime JSON Schema validations.

```bash
npm run contracts:test
```

---

## Generics

### Generate types and wiki

```bash
npm run generate:all
```

### Generate types

```bash
npm run build
```

### Validate OWL with codelists, generate TypeScript types, and generate the wiki

```bash
npm run build:all
```
